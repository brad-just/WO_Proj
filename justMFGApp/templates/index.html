{% extends "layout.html" %}


{% block content %}


<table class="table table-striped table-window">
  <thead class="bg-dark-grey">
    <tr>

      <th scope="col">#</th>

      {% for col in orders.header %}

        {% if col != 'LongDesc' %}

          {% if col == 'ItemID' %}
            <th scope="col""></th>
            <th scope="col""></th>
          {% endif %}

          <th id="{{ col }}"scope="col"><form method="post" action="{{ url_for('index', _anchor=col) }}"><input class="btn btn-link btn-sm" type="submit" name="key" value="{{ col }}"></form></th>

        {% endif %}

      {% endfor %}

    </tr>
  </thead>
  <tbody>
    {% for order in orders.data %}
      {% set outer_index = loop.index %}
      <tr>
        <th nowrap scope="row">{{ outer_index }}</th>
      {% for entry in orders.header %}

        {% if entry == "ItemID" %}

          <td><button type="button" class="btn btn-secondary btn-lg" data-toggle="modal" data-target="#modal-{{ outer_index }}">PDF</button></td>
          <!-- Modal -->
          <div class="modal fade" id="modal-{{ outer_index }}" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
            <div class="modal-dialog modal-lg bg-cream" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLongTitle">{{ order['ItemID'] }}</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  <embed src="{{ url_for('pdfs.static', filename=order['ItemID']+'.pdf') }}" frameborder="0" width="100%" height="700px">
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
              </div>
            </div>
          </div>

          <td><a tabindex="0" class="btn btn-secondary btn-lg" role="button" data-toggle="popover" data-trigger="focus" title="Long Description" data-content="{{ order['LongDesc'] }}">Description</a></td>

          <td nowrap>{{ order[entry] }}</td>

        {% elif entry != "LongDesc" %}

          <td nowrap>{{ order[entry] }}</td>

        {% endif %}
      {% endfor %}

      </tr>

    {% endfor %}
  </tbody>

</table>

{% endblock content %}
